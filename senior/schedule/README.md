
## 调度器的三个基本对象：
* G (Goroutine)，代表协程，也就是每次代码中使用 go 关键词时候会创建的一个对象
* M (Work Thread)，工作线程
* P (Processor)，代表一个处理器，又称上下文

## G-M-P三者的关系与特点：
1. 每个M必须绑定一个P，线程M创建后会去检查并执行G
2. 每个P都有一个本地G队列，整个调度器还有一个全局的G队列
3. M从队列中提取G并执行
4. P 的个数就是GOMAXPROCS（最大256），启动时固定的，一般不修改
5. M 的个数和 P 的个数不一定一样多（会有休眠的M 或 P不绑定M ）（最大10000）
6. P 是用一个全局数组（255）来保存的，并且维护着一个全局的 P 空闲链表

![image](https://raw.githubusercontent.com/altairlee/awesomeGo/master/images/goschedule/g-m-p.png)

## 本地队列和全局队列

1. G任务执行的顺序是：
```$xslt
    1.先从本地队列中找
    2.再从其他P的队列中找
    3.然后去全局队列中找
```

2. 全局G任务队列和本地队列按照一定的策略进行互换，即协程交换任务：
```$xslt
    1.全局与局部：全局G个数/P个数
    2.局部与局部：一次转移一半
```



